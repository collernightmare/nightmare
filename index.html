<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Казино Рулетка</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }

        .auth-form {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .game-container {
            display: none;
        }

        input {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #444;
            background: #333;
            color: white;
        }

        button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #219a52;
        }

        #roulette {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            margin: 20px auto;
            background: green;
            transition: transform 2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .balance {
            font-size: 24px;
            margin: 20px 0;
            color: #27ae60;
        }

        .bet-panel {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- Форма авторизации -->
    <div class="auth-form" id="authForm">
        <h2>Вход/Регистрация</h2>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Пароль">
        <button onclick="login()">Войти</button>
        <button onclick="register()">Зарегистрироваться</button>
    </div>

    <!-- Игровой интерфейс -->
    <div class="game-container" id="gameContainer">
        <div class="balance">
            Баланс: $<span id="currentBalance">0</span>
        </div>

        <div class="bet-panel">
            <input type="number" id="betAmount" placeholder="Сумма ставки">
            <button onclick="placeBet()">Сделать ставку</button>
        </div>

        <div id="roulette">РУЛЕТКА</div>
        <button onclick="logout()">Выйти</button>
        
        <!-- Кнопка пополнения (нерабочая) -->
        <button style="background: #7f8c8d" onclick="alert('Пополнение временно недоступно')">
            Пополнить баланс
        </button>
    </div>

    <script>
        let currentUser = null;

        // Загрузка пользователя при открытии страницы
        function loadUser() {
            const user = localStorage.getItem('currentUser');
            if(user) {
                currentUser = JSON.parse(user);
                showGameInterface();
            }
        }

        // Показать игровой интерфейс
        function showGameInterface() {
            document.getElementById('authForm').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            document.getElementById('currentBalance').textContent = currentUser.balance.toLocaleString();
        }

        // Регистрация
        function register() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if(!email || !password) {
                alert('Заполните все поля!');
                return;
            }

            const user = {
                email,
                password, // В реальном проекте никогда так не храните пароли!
                balance: 100000
            };

            localStorage.setItem(email, JSON.stringify(user));
            alert('Регистрация успешна!');
        }

        // Вход
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const user = JSON.parse(localStorage.getItem(email));

            if(user && user.password === password) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                showGameInterface();
            } else {
                alert('Неверные данные!');
            }
        }

        // Выход
        function logout() {
            localStorage.removeItem('currentUser');
            location.reload();
        }

        // Сделать ставку
        function placeBet() {
            const betAmount = parseInt(document.getElementById('betAmount').value);
            
            if(!betAmount || betAmount <= 0) {
                alert('Введите сумму ставки!');
                return;
            }

            if(betAmount > currentUser.balance) {
                alert('Недостаточно средств!');
                return;
            }

            spinRoulette(betAmount);
        }

        // Вращение рулетки
        function spinRoulette(betAmount) {
            const roulette = document.getElementById('roulette');
            roulette.style.transform = 'rotate(1440deg)';
            
            setTimeout(() => {
                const result = Math.random() < 0.5 ? 'red' : 'black';
                roulette.style.backgroundColor = result;
                
                if(result === 'red') {
                    currentUser.balance += betAmount;
                    alert(`Вы выиграли $${betAmount}!`);
                } else {
                    currentUser.balance -= betAmount;
                    alert(`Вы проиграли $${betAmount}!`);
                }

                // Обновление данных
                localStorage.setItem(currentUser.email, JSON.stringify(currentUser));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                document.getElementById('currentBalance').textContent = currentUser.balance.toLocaleString();
                roulette.style.transform = 'rotate(0deg)';
            }, 2000);
        }

        // Загружаем пользователя при загрузке страницы
        window.onload = loadUser;
    </script>
</body>
</html>
