<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Casino</title>
    <style>
        :root {
            --primary: #2a2f4d;
            --accent: #ff6b6b;
            --background: #1a1a24;
            --glass: rgba(255,255,255,0.05);
        }

        body {
            font-family: Arial, sans-serif;
            background: var(--background);
            color: white;
            margin: 0;
            padding: 20px;
        }

        .auth-form, .game-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: var(--glass);
            border-radius: 10px;
        }

        .balance-section {
            text-align: center;
            margin: 20px 0;
            font-size: 24px;
        }

        .roulette-wheel {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            background: green;
            transition: transform 3s;
        }

        .number {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transform-origin: 200px 200px;
        }

        .red { background: #e74c3c; }
        .black { background: #2c3e50; }
        .green { background: #2ecc71; }

        .bet-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .bet-button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .crash-graph {
            height: 200px;
            background: #34495e;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .crash-line {
            height: 4px;
            background: var(--accent);
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>
    <!-- Авторизация -->
    <div class="auth-form" id="authForm">
        <h2>Вход / Регистрация</h2>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Пароль">
        <button onclick="login()">Войти</button>
        <button onclick="register()">Зарегистрироваться</button>
    </div>

    <!-- Игровая зона -->
    <div class="game-container hidden" id="gameContainer">
        <div class="balance-section">
            Баланс: $<span id="balance">0</span>
        </div>

        <!-- Рулетка -->
        <h3>Рулетка</h3>
        <div class="roulette-wheel" id="roulette"></div>
        <div class="bet-buttons">
            <button class="bet-button" style="background: #e74c3c" onclick="placeBet('red')">Красное x2</button>
            <button class="bet-button" style="background: #2c3e50" onclick="placeBet('black')">Черное x2</button>
        </div>

        <!-- Crash -->
        <h3>Crash</h3>
        <div class="crash-graph">
            <div class="crash-line" id="crashLine"></div>
            <div id="crashMultiplier" style="position: absolute; right: 10px; top: 10px;">1.00x</div>
        </div>
        <input type="number" id="crashBet" placeholder="Сумма ставки">
        <button onclick="startCrash()" id="crashButton">Запустить</button>
        <button onclick="cashOut()" class="hidden" id="cashOutButton">Забрать (1.00x)</button>
    </div>

    <script>
        let currentUser = null;
        let crashGameActive = false;
        let crashMultiplier = 1.0;
        let crashInterval;

        // Инициализация рулетки
        function initRoulette() {
            const numbers = [
                {num: 0, color: 'green'}, {num: 32, color: 'red'}, {num: 15, color: 'black'},
                {num: 19, color: 'red'}, {num: 4, color: 'black'}, {num: 21, color: 'red'},
                {num: 2, color: 'black'}, {num: 25, color: 'red'}, {num: 17, color: 'black'},
                {num: 34, color: 'red'}, {num: 6, color: 'black'}, {num: 27, color: 'red'},
                {num: 13, color: 'black'}, {num: 36, color: 'red'}, {num: 11, color: 'black'},
                {num: 30, color: 'red'}, {num: 8, color: 'black'}, {num: 23, color: 'red'},
                {num: 10, color: 'black'}, {num: 5, color: 'red'}, {num: 24, color: 'black'},
                {num: 16, color: 'red'}, {num: 33, color: 'black'}, {num: 1, color: 'red'},
                {num: 20, color: 'black'}, {num: 14, color: 'red'}, {num: 31, color: 'black'},
                {num: 9, color: 'red'}, {num: 22, color: 'black'}, {num: 18, color: 'red'},
                {num: 29, color: 'black'}, {num: 7, color: 'red'}, {num: 28, color: 'black'},
                {num: 12, color: 'red'}, {num: 35, color: 'black'}, {num: 3, color: 'red'}
            ];

            const wheel = document.getElementById('roulette');
            numbers.forEach((num, index) => {
                const angle = (index * 9.73) - 4.86;
                const numElement = document.createElement('div');
                numElement.className = `number ${num.color}`;
                numElement.textContent = num.num;
                numElement.style.transform = `rotate(${angle}deg) translate(150px)`;
                wheel.appendChild(numElement);
            });
        }

        // Ставка на рулетку
        function placeBet(color) {
            const betAmount = prompt("Введите сумму ставки:");
            if(!betAmount || betAmount > currentUser.balance) return alert("Ошибка!");

            currentUser.balance -= betAmount;
            updateBalance();

            const wheel = document.getElementById('roulette');
            wheel.style.transform = `rotate(${1440 + Math.random() * 360}deg)`;

            setTimeout(() => {
                const resultNumber = Math.floor(Math.random() * 37);
                const resultColor = resultNumber === 0 ? 'green' : 
                                 resultNumber % 2 === 0 ? 'black' : 'red';
                
                if(resultColor === color) {
                    currentUser.balance += betAmount * 2;
                    alert(`Выигрыш! Выпало: ${resultNumber} (${resultColor})`);
                } else {
                    alert(`Проигрыш! Выпало: ${resultNumber} (${resultColor})`);
                }
                updateBalance();
            }, 3000);
        }

        // Crash игра
        function startCrash() {
            const betAmount = document.getElementById('crashBet').value;
            if(!betAmount || betAmount > currentUser.balance) return alert("Ошибка!");

            currentUser.balance -= betAmount;
            updateBalance();
            
            crashMultiplier = 1.0;
            crashGameActive = true;
            document.getElementById('crashButton').classList.add('hidden');
            document.getElementById('cashOutButton').classList.remove('hidden');

            crashInterval = setInterval(() => {
                crashMultiplier += 0.01;
                document.getElementById('crashLine').style.width = 
                    `${Math.min(crashMultiplier * 3, 100)}%`;
                document.getElementById('crashMultiplier').textContent = 
                    crashMultiplier.toFixed(2) + 'x';
                document.getElementById('cashOutButton').textContent = 
                    `Забрать (${crashMultiplier.toFixed(2)}x)`;

                if(Math.random() < 0.015) {
                    endCrash(false);
                }
            }, 100);
        }

        function cashOut() {
            endCrash(true);
        }

        function endCrash(success) {
            clearInterval(crashInterval);
            crashGameActive = false;
            const betAmount = document.getElementById('crashBet').value;
            
            if(success) {
                currentUser.balance += betAmount * crashMultiplier;
                alert(`Успешно! x${crashMultiplier.toFixed(2)}`);
            } else {
                alert(`Крах! Вы проиграли`);
            }
            
            updateBalance();
            document.getElementById('crashLine').style.width = '0';
            document.getElementById('crashButton').classList.remove('hidden');
            document.getElementById('cashOutButton').classList.add('hidden');
        }

        // Система пользователя
        function register() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            const user = {
                email,
                password,
                balance: 0,
                history: []
            };

            localStorage.setItem(email, JSON.stringify(user));
            alert("Регистрация успешна!");
        }

        function login() {
            const email = document.getElementById('email').value;
            const user = JSON.parse(localStorage.getItem(email));
            
            if(user && user.password === document.getElementById('password').value) {
                currentUser = user;
                document.getElementById('authForm').classList.add('hidden');
                document.getElementById('gameContainer').classList.remove('hidden');
                updateBalance();
                initRoulette();
            } else {
                alert("Ошибка входа!");
            }
        }

        function updateBalance() {
            document.getElementById('balance').textContent = currentUser.balance;
            localStorage.setItem(currentUser.email, JSON.stringify(currentUser));
        }

        // Как выдавать баланс (для админа):
        /*
        1. Откройте консоль браузера (F12)
        2. Введите: addBalance('user@email.com', 1000)
        3. Нажмите Enter
        */
        window.addBalance = function(email, amount) {
            const user = JSON.parse(localStorage.getItem(email));
            if(user) {
                user.balance += amount;
                localStorage.setItem(email, JSON.stringify(user));
                console.log(`Баланс пополнен! ${email} +$${amount}`);
            }
        }
    </script>
</body>
</html>
